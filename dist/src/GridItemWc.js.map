{"version":3,"file":"GridItemWc.js","sourceRoot":"","sources":["../../src/GridItemWc.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, LitElement } from 'lit';\nimport { property } from 'lit/decorators.js';\n\ntype Position = {\n left: number;\n top: number;\n}\nexport class GridItemWc extends LitElement {\n  @property({ type: Array }) data:any = {x:0,y:0,w:50,h:20};\n  @property({ type: Boolean }) drag = false;\n  @property({ type: Boolean }) edit = false;\n  @property({ type: Number }) griddingWidth = 10;\n\n  @property({ type: Number }) float:boolean = false;\n  @property({ type: Number }) zIndex:number = 1000;\n  resizeFixPosition = {top:0,left:0};\n  resizeingPosition = {top:0,left:0};\n  get movePosition():Position{\n   return {left: this.data.x * this.griddingWidth ,top: this.data.y * this.griddingWidth}\n  };\n  get width() {\n   return this.data.w * this.griddingWidth\n  }\n  get height() {\n   return this.data.h * this.griddingWidth\n  }\n  constructor(){\n   super();\n  }\n  /** resize mouse down */\n  resizeMouseDown(e:MouseEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.resizeFixPosition.left = e.clientX;\n    this.resizeFixPosition.top = e.clientY;\n    this.resizeingPosition.left = e.clientX;\n    this.resizeingPosition.top = e.clientY;\n    document.body.setAttribute(\"onselectstart\",\"return false\");\n    document.body.style.cursor = \"se-resize\";\n    window.addEventListener(\"mousemove\",this.resizeing);\n    this.sendReszeEvent(\"resizestart\");\n    const _this = this;\n    window.addEventListener(\"mouseup\", function mouseup(){\n      document.body.removeAttribute(\"onselectstart\");\n      document.body.style.cursor = \"\";\n      _this.sendReszeEvent(\"resizeend\");\n      window.removeEventListener(\"mousemove\",_this.resizeing);\n      window.removeEventListener(\"mouseup\",mouseup);\n    });\n  }\n  resizeing = (e:any) => {\n    console.log(e);\n    this.resizeingPosition.left = e.clientX;\n    this.resizeingPosition.top = e.clientY;\n    this.sendReszeEvent(\"resizeing\");\n  }\n\n  sendReszeEvent (type: any | \"resizestart\" | \"resizeing\" | \"resizeend\"){\n \n    let w = this.data.w + Math.floor((this.resizeingPosition.left - this.resizeFixPosition.left) / this.griddingWidth);\n    let h = this.data.h + Math.floor((this.resizeingPosition.top - this.resizeFixPosition.top) / this.griddingWidth);\n    let x = this.data.x;\n    let y = this.data.y;\n    let id = this.data.id;\n    const event:any = new Event(type,);\n    event.detail  = { w, h, x, y,id, data: this.data };\n    this.dispatchEvent(event);\n  };\n  // connectedCallback(){\n    \n  // }\n  // disconnectedCallback(){\n    \n  // }\n  render() {\n   \n    return html`<div\n    class=\"grid-item\"\n    drag=\"${this.drag}\"\n    .class=\"${this.edit?'move':''}\"\n    :float-ing=\"float\"\n    :move-ing=\"move\"\n    style=\"left:${this.movePosition.left}px; top:${this.movePosition.top}px; z-index:${this.float? (1000 + this.zIndex):(100 + this.zIndex)};width:${this.width}px; height:${this.height}px\"\n    @mousedown=\"mousedown($event)\">\n \n    <slot></slot>\n    <div class=\"tool-box\">\n      <i class=\"el-icon set-float\" @click=\"setFloat()\">\n        <!--[-->\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-subtract\" viewBox=\"0 0 16 16\">\n          <path d=\"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2z\"/>\n        </svg>\n        <!--]-->\n      </i>\n      <i @click=\"close()\" class=\"el-icon close\" style=\"font-size:20px;\" >\n        <!--[-->\n        <svg viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"currentColor\" d=\"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z\"></path></svg>\n        <!--]-->\n      </i>\n    </div>\n    <div class=\"resize bottom-right\" @mousedown=\"${this.resizeMouseDown}\" v-if=\"props.edit\">\n      \n    </div>\n  </div>\n    `;\n  }\n  static styles = css`\n  :host {\n    display: block;\n    padding: 0px;\n  }\n  .grid-item {\n   display:block;\n   \n   min-width: 80px;\n   min-height: 50px;\n   border-radius: 3px;\n   overflow:hidden;\n   background-color:#fff;\n   box-shadow: 0px 0px 6px -2px rgb(48 47 51);\n   box-sizing: border-box;\n   transition: all 0.3s;\n }\n  .grid-item.move {\n   cursor:move;\n }\n .grid-item[move-ing=\"true\"] {\n   box-shadow: 0px 0px 6px -2px rgb(48 47 51);\n   transition: none;\n }\n .grid-item[float-ing=\"true\"]{\n   border:2px solid rgb(207 207 207);\n   box-shadow: 0px 0px 6px -2px rgb(48 47 51);\n }\n .grid-item[float-ing=\"true\"] .set-float{\n   opacity: 1;\n   color:#fff;\n   background-color:#a5a5a5;\n }\n \n .grid-item:hover .resize{\n   display: flex;\n }\n .grid-item .bottom-right{\n  cursor: se-resize;\n  right: 4px;\n  bottom: 4px;\n  width: 10px;\n  height: 10px;\n  border-right: 3px solid #a19e9e;\n  border-bottom: 3px solid #a19e9e;\n }\n \n .grid-item .tool-box {\n  position: absolute;\n  top:5px;\n  right:10px;\n  display: flex;\n}\n.grid-item  .tool-box .el-icon {\n  width:15px;\n  height:15px;\n  color:#929292;\n  padding:3px;\n  border-radius: 3px;\n  display: flex;\n}\n.grid-item .tool-box .el-icon:hover{\n  cursor:pointer;\n  opacity: 0.6;\n}\n .grid-item .resize > svg {\n   color: rgb(160 160 160)\n }\n .grid-item .resize:hover{\n   opacity: 0.6;\n }\n \n .grid-item[drag=true] {\n  opacity: 0.5;\n  background-color: rgb(249, 227, 193);\n  box-shadow: none;\n  border: none;\n  cursor: auto;\n  transition: none;\n}\n.grid-item[drag=true] .close,\n.grid-item[drag=true] .set-float,\n.grid-item[drag=true] .bottom-right {\n  display: none;\n}\n\n.resize{\n  position: absolute;\n  display: none;\n}\n\n\n`;\n}\n"]}