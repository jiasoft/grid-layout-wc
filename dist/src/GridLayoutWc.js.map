{"version":3,"file":"GridLayoutWc.js","sourceRoot":"","sources":["../../src/GridLayoutWc.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, LitElement } from 'lit';\nimport { property, state } from 'lit/decorators.js';\ninterface ItemData  {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n}\ninterface GridItemData  extends ItemData{\n  id: number;\n  z:number;\n  selected?:boolean;\n  dataSource?: any;\n  time?: number;\n  title?: string;\n  float?: boolean;\n  slot?:string;\n  style?:{left:number,top:number,width:number,height:number}\n}\ntype HtmlPosition = {\n  left: number;\n  top: number;\n}\ntype GridPosition = {\n  x: number;\n  y: number;\n}\nconst DRAG_ID = 100000;\n\nexport class GridLayoutWc extends LitElement {\n  @state() RenderIndex: number = 0; //这个属性改动，页面才会render\n  @property({ type: Number }) griddingWidth = 10;\n  @property({ type: Number }) gridMargin = 1;\n  @property({ type: Boolean }) edit = false;\n  @property({ type: Array }) layoutData: GridItemData[] = [];\n  dragData = { x: 0, y: 0, w: 60, h: 60, z: 0, id: DRAG_ID };\n  draggIng: boolean = false;\n  stageHeight: number = 0;\n  stageWidth: number = 1000;\n  resizeFixPosition: any = { top: 0, left: 0 };\n  resizeingPosition: any = { top: 0, left: 0 };\n  curResizingGridItemData: any|null = null;\n  zIndex = 100;\n  dataStore: any[] = [];\n  dataStoreIndex: number = 0;\n  curMovingGridItemData: any|null = null;\n  movePosition: HtmlPosition = { left: 0, top: 0 };\n  fixPosition: HtmlPosition = { left: 0, top: 0 };\n  oldPosition: HtmlPosition = { left: 0, top: 0 };\n  transition:boolean = false;\n  drawDragDataHtml() {\n    return html`<div class=\"grid-item drag\" drag=\"${true}\" style=\"${this.getGridItemStyle(this.dragData)}\"></div>`\n  }\n  constructor() {\n    super();\n\n  }\n  //查找GridItem\n  findGridItemData = (id: any): GridItemData | undefined => {\n    return this.layoutData.find((item: GridItemData) => item.id === id);\n  }\n  //add\n  addGridItem() {\n    const w = 30;\n    const h = 12;\n    let { x, y } = this.getEmptyBound(w, h);\n    let time = new Date().getTime();\n    const item: GridItemData = { x, y, w, h, z: 0, id: time, title: time.toString() };\n    this.layoutData.push(item);\n    this.RenderIndex ++;\n    this.saveCurLayout();\n  }\n  /**\n   * 获取空间的位置\n   * @param w \n   * @param h \n   * @returns { x, y }\n   */\n  getEmptyBound(w: number, h: number) {\n\n    this.stageWidth = this.getBoundingClientRect().width;\n    let x = this.gridMargin, y = this.gridMargin;\n    let item = this.findBigestOverlapItem(x, y, w, h);\n    while (item) {\n      x = item.x + item.w + this.gridMargin;\n      if ((x + this.gridMargin) * this.griddingWidth + w * this.griddingWidth > this.stageWidth) {\n        y += this.gridMargin;\n        x = this.gridMargin;\n      }\n      item = this.findBigestOverlapItem(x, y, w, h);\n    }\n    return { x, y };\n  }\n  /**\n   * 查找存在的最大的重叠交叉项\n   * */\n  findBigestOverlapItem = (x: number, y: number, w: number, h: number, exceptIds?: any[]): GridItemData | undefined => {\n    const list = this.findOverlapItem(x, y, w, h, exceptIds);\n    let BigestOverlapArea = -99999999999; //最大的重叠交叉面积\n    let BigestOverlapItem: any = undefined;\n    list.forEach((item: any) => {\n      let curItemX = item.x;\n      let curItemY = item.y;\n      let curItemW = item.w;\n      let curItemH = item.h;\n      if (this.curActiveGridItem && this.curActiveGridItem.id === item.id && this.dragData ) {\n        curItemX = this.dragData.x;\n        curItemY = this.dragData.y;\n        curItemW = this.dragData.w;\n        curItemH = this.dragData.h;\n      }\n      const overX1 = Math.max(x, curItemX);\n      const overX2 = Math.min(x + w, curItemX + curItemW);\n      const overW = overX2 - overX1;\n      const overY1 = Math.max(y, curItemY);\n      const overY2 = Math.min(y + h, curItemY + curItemH);\n      const overH = overY2 - overY1;\n      const overArea = overH * overW;\n      if (overArea > BigestOverlapArea) {\n        BigestOverlapArea = overArea;\n        BigestOverlapItem = item;\n      }\n    });\n\n    return BigestOverlapItem;\n  }\n  /**\n   * 获取交叉的GridItem 列表\n   * @param x x\n   * @param y y\n   * @param w w\n   * @param h h\n   * @param exceptIds 排序的id\n   * @returns 交叉的GridItem 列表\n   */\n  findOverlapItem = (x: number, y: number, w: number, h: number, exceptIds?: any[]): GridItemData[] => {\n\n    const list: GridItemData[] = [];\n    const data = this.layoutData.filter((item: any) => !item.float);\n    for (let i = 0; i < data.length; i++) {\n      let item = data[i];\n      if (exceptIds && exceptIds.indexOf(item.id) >= 0) {\n        continue;\n      }\n      let curItemX = item.x;\n      let curItemY = item.y;\n      let curItemW = item.w;\n      let curItemH = item.h;\n      if (this.curActiveGridItem && this.curActiveGridItem.id === item.id && this.dragData) {\n        curItemX = this.dragData.x;\n        curItemY = this.dragData.y;\n        curItemW = this.dragData.w;\n        curItemH = this.dragData.h;\n      }\n      let x1 = Math.min(curItemX, x);\n      let x2 = Math.max(curItemX + curItemW, x + w);\n\n\n      let y1 = Math.min(curItemY, y);\n      let y2 = Math.max(curItemY + curItemH, y + h);\n\n      //是否存在交叉的算法\n      if (((x2 - x1) - (curItemW + w)) < this.gridMargin &&\n        ((y2 - y1) - (curItemH + h)) < this.gridMargin) {\n        list.push(item);\n      }\n    }\n    return list;\n  }\n  /**\n   * Resize start\n   * @param event MouseEvent\n   */\n  gridItemResizeStart(event:MouseEvent) {\n    if (!this.edit) return;\n    event.preventDefault();\n    event.stopPropagation();\n\n    const index = this.getGridItemIndex(event.currentTarget);\n    this.curResizingGridItemData = this.layoutData[index];\n    this.resizeFixPosition.left = event.clientX;\n    this.resizeFixPosition.top = event.clientY;\n    this.resizeingPosition.left = event.clientX;\n    this.resizeingPosition.top = event.clientY;\n    this.transition = true;\n    this.RenderIndex++;\n    document.body.setAttribute(\"onselectstart\", \"return false\");\n    document.body.style.cursor = \"se-resize\";\n\n    const mouseMove = (event: MouseEvent) => {\n      this.gridItemResizeing(event)\n    }\n    let { x, y, w, h, id } = this.curResizingGridItemData;\n    this.dragData.x = x;\n    this.dragData.y = y;\n    this.dragData.w = w;\n    this.dragData.h = h;\n    \n    const mouseup = () => {\n      document.body.removeAttribute(\"onselectstart\");\n      document.body.style.cursor = \"\";\n      this.gridItemResizeEnd();\n      window.removeEventListener(\"mousemove\", mouseMove);\n      window.removeEventListener(\"mouseup\", mouseup);\n    }\n    window.addEventListener(\"mousemove\", mouseMove);\n    window.addEventListener(\"mouseup\", mouseup);\n  }\n  /**\n   * resizeing\n   * @param event \n   */\n  gridItemResizeing(event: any) {\n    if (!this.edit) return;\n    this.resizeingPosition.left = event.clientX;\n    this.resizeingPosition.top = event.clientY;\n    \n    let w = this.curResizingGridItemData.w + Math.round((this.resizeingPosition.left - this.resizeFixPosition.left) / this.griddingWidth);\n    let h = this.curResizingGridItemData.h + Math.round((this.resizeingPosition.top - this.resizeFixPosition.top) / this.griddingWidth);\n    let x = this.curResizingGridItemData.x;\n    let y = this.curResizingGridItemData.y;\n    let z = this.curResizingGridItemData.z;\n    \n    if (this.curResizingGridItemData.float) {\n      this.draggIng = true;\n      this.dragData.x = x;\n      this.dragData.y = y;\n      this.dragData.w = w;\n      this.dragData.h = h;\n      this.dragData.z = z;\n      this.RenderIndex++;\n      return;\n    }\n    let height = this.curResizingGridItemData.h * this.griddingWidth + (this.resizeingPosition.top - this.resizeFixPosition.top)\n    let width = this.curResizingGridItemData.w * this.griddingWidth + (this.resizeingPosition.left - this.resizeFixPosition.left);\n    if(width > this.stageWidth -x * this.griddingWidth) {\n      width = this.stageWidth -x * this.griddingWidth;\n    }\n    this.curResizingGridItemData.style = {width,height,left:x * this.griddingWidth,top:y * this.griddingWidth};\n    w < 100 ? 100 : w;\n    h < 50 ? 50 : h;\n\n    /** 不允许超出griddingWidth */\n    w = w * this.griddingWidth <= this.stageWidth - (x + this.gridMargin) * this.griddingWidth ?\n        w : Math.floor(this.stageWidth / this.griddingWidth) - x - this.gridMargin;\n    this.draggIng = true;\n    this.dragData.x = x;\n    this.dragData.y = y;\n    this.dragData.w = w;\n    this.dragData.h = h;\n    this.rearrangement();\n    this.RenderIndex++;\n  }\n  /**\n   * Resize end\n   */\n  gridItemResizeEnd() {\n    if (!this.edit) return;\n    this.draggIng = false;\n    let { x, y, w, h } = this.dragData;\n    this.curResizingGridItemData.x = x;\n    this.curResizingGridItemData.y = y;\n    this.curResizingGridItemData.w = w;\n    this.curResizingGridItemData.h = h;\n    delete this.curResizingGridItemData.style;\n    this.curResizingGridItemData = null;\n    this.rearrangement();\n    this.transition = false;\n    this.RenderIndex++;\n    this.saveCurLayout();\n  }\n  /**\n   * ItemStyle事件\n   * @param data GridItemData\n   * @returns \n   */\n  getGridItemStyle(data: GridItemData) {\n    if(data.style){\n      return `\n      transition:none;\n      left:${data.style.left}px;\n      top:${data.style.top}px;\n      z-index:1000;\n      width:${data.style.width}px; \n      height:${data.style.height}px`;\n    }\n    const style = { left: data.x * this.griddingWidth, top: data.y * this.griddingWidth, width: data.w * this.griddingWidth, height: data.h * this.griddingWidth };\n    const zIndex = data.id === DRAG_ID ? 9999 : (data.float ? (1000 + data.z||0) : (100 + data.z||0));\n    return `\n      left:${style.left}px;\n      top:${style.top}px;\n      z-index:${zIndex};\n      width:${style.width}px; \n      height:${style.height}px`;\n  }\n  /** 保存Layout */\n  saveCurLayout() {\n    this.dataStoreIndex++;\n    this.dataStore[this.dataStoreIndex] = JSON.stringify(this.layoutData);\n  }\n  /** 移除GridImte */\n  gridItemClose(event: PointerEvent) {\n    const index = this.getGridItemIndex(event.currentTarget);\n    this.layoutData.splice(index, 1);\n    this.transition = false;\n    this.RenderIndex++;\n    this.rearrangement();\n    this.RenderIndex++;\n  }\n  getGridItemIndex(target: any) {\n    const grid: HTMLElement | null = target?.closest('.grid-item') || null;\n    return Number(grid?.dataset.index || '0');\n  }\n  getGridItem(target: any) {\n    const index = this.getGridItemIndex(target);\n    return this.layoutData[index];\n  }\n  /**\n   * 拖拽开始\n   * @param event PointerEvent\n   * @returns void\n   */\n  gridItemDragstart(event: PointerEvent) {\n    if (!this.edit) return;\n    const target:any = event?.target;\n    if(target?.closest('.grid-item-close')){\n      this.gridItemClose(event);\n      return;\n    }\n    if(target?.closest('.set-float')){\n      this.gridItemFloat(event);\n      return;\n    }\n    \n    event.preventDefault();\n    this.curMovingGridItemData = this.getGridItem(event.currentTarget);\n    if (!this.curMovingGridItemData) return;\n    const { w, h, x, y, id } = this.curMovingGridItemData;\n    this.movePosition = {\n      left: this.curMovingGridItemData.x * this.griddingWidth,\n      top: this.curMovingGridItemData.y * this.griddingWidth\n    };\n    this.fixPosition.left = event.clientX;\n    this.fixPosition.top = event.clientY;\n    this.oldPosition.left = this.movePosition.left;\n    this.oldPosition.top = this.movePosition.top;\n    this.curMovingGridItemData.z = 100;\n    this.layoutData.forEach((item) => {if(item.id !== this.curMovingGridItemData.id) delete item.selected});\n    this.curMovingGridItemData.selected = true;\n    this.dragData.w = w;\n    this.dragData.h = h;\n    this.dragData.x = x;\n    this.dragData.y = y;\n    this.transition = true;\n    this.RenderIndex ++;\n    const onDragging: any = (event: PointerEvent) => {\n      this.curMovingGridItemData.selected = true;\n      this.movePosition.left = this.oldPosition.left + (event.clientX - this.fixPosition.left);\n      this.movePosition.top = this.oldPosition.top + (event.clientY - this.fixPosition.top);\n\n      if (!this.edit) return;\n      this.draggIng = true;\n\n      const { w, h, id } = this.curMovingGridItemData;\n      this.dragData.w = w;\n      this.dragData.h = h;\n\n      let height = this.curMovingGridItemData.h * this.griddingWidth;\n      let width = this.curMovingGridItemData.w * this.griddingWidth;\n     \n      this.curMovingGridItemData.style = { width, height, left:this.movePosition.left, top:this.movePosition.top }\n      const { x, y } = this.calcNearPosition(this.movePosition.left, this.movePosition.top);\n      if (this.curMovingGridItemData.float) {\n        this.dragData.x = x;\n        this.dragData.y = y;\n        this.RenderIndex++;\n        return;\n      }\n      const newPos = this.getNearEmptyPosition({ x, y, w, h, id: 0,z:0 });\n      if (newPos) {\n        this.dragData.x = newPos.x;\n        this.dragData.y = newPos.y;\n      }\n      this.rearrangement();\n      this.RenderIndex++;\n    };\n    const onDragEnd: any = () => {\n      if (!this.edit) return;\n      this.draggIng = false;\n      delete this.curMovingGridItemData.style\n      this.curMovingGridItemData.x = this.dragData.x;\n      this.curMovingGridItemData.y = this.dragData.y;\n      this.curMovingGridItemData.time = new Date().getTime();\n      this.curMovingGridItemData.z = 0;\n      this.curMovingGridItemData = null;\n      this.transition = false;\n      this.RenderIndex++;\n      this.saveCurLayout();\n      document.body.removeAttribute(\"onselectstart\");\n      window.removeEventListener(\"mousemove\", onDragging);\n      window.removeEventListener(\"mouseup\", onDragEnd);\n    }\n    document.body.setAttribute(\"onselectstart\", \"return false\");\n    window.addEventListener(\"mousemove\", onDragging);\n    window.addEventListener(\"mouseup\", onDragEnd);\n  }\n  /**\n   * 转换成的GidPosition\n   * @param left style.left\n   * @param top style.top\n   * @returns {x,y}\n   */\n  calcNearPosition = (left: number, top: number): GridPosition => {\n    let x = Math.round(left / this.griddingWidth);\n    let y = Math.round(top / this.griddingWidth);\n    return { x, y };\n  }\n  \n  /**\n   * 获取最近的空间\n   * @param grid :GridItemData\n   * @returns {x,y}\n   */\n  getNearEmptyPosition(grid: GridItemData) {\n\n    let { w } = grid;\n    let { x, y } = this.getMinXY(grid);\n    x = x < this.gridMargin ? this.gridMargin : x;\n    x = (x + w + this.gridMargin) > Math.floor(this.stageWidth / this.griddingWidth) ?\n      Math.floor(this.stageWidth / this.griddingWidth) - this.gridMargin - w : x;\n    return { x, y };\n  \n  }\n  \n  /**\n   * 非邻国\n   * @param item \n   */\n  isNotNeighbor = (item: GridItemData): boolean => {\n    const x1 = Math.min(item.x, this.dragData.x);\n    const x2 = Math.max(item.x + item.w, this.dragData.x + this.dragData.w);\n    const leftRight = x2 - x1 >= item.w + this.dragData.w + this.gridMargin;\n\n    let y1 = Math.min(item.y, this.dragData.y);\n    let y2 = Math.max(item.y + item.h, this.dragData.y + this.dragData.h);\n    const upDown = y2 - y1 >= item.h + this.dragData.h + this.gridMargin;\n\n    return leftRight && upDown;\n  }\n  /** \n   * 是否左右并列\n  */\n  isNeighborLeftRight = (item: GridItemData): boolean => {\n    const x1 = Math.min(item.x, this.dragData.x);\n    const x2 = Math.max(item.x + item.w, this.dragData.x + this.dragData.w);\n    return x2 - x1 == item.w + this.dragData.w + this.gridMargin;\n  }\n  /**\n   * 是否上下并列\n   */\n  isNeighborUpDown = (item: GridItemData) => {\n    let y1 = Math.min(item.y, this.dragData.y);\n    let y2 = Math.max(item.y + item.h, this.dragData.y + this.dragData.h);\n    return y2 - y1 == item.h + this.dragData.h + this.gridMargin;\n  }\n  /**\n   * 返回 上次的layout\n   * @returns JSON\n   */\n  getBackLayout = () => {\n    this.dataStoreIndex--;\n    return this.dataStore[this.dataStoreIndex]\n  }\n  /**\n   * 打开上次的保存layout\n   */\n  backLayout = () => {\n    const data = this.getBackLayout();\n    if (data) {\n      this.layoutData = JSON.parse(data);\n    }\n  }\n  /** 下一个layout */\n  getForwardLayout = () => {\n    this.dataStoreIndex = this.dataStore.length - 1 > this.dataStoreIndex ? this.dataStoreIndex + 1 : this.dataStore.length - 1;\n    return this.dataStore[this.dataStoreIndex]\n  }\n  /** 打开下一步的layout */\n  forwardLayout = () => {\n    const data = this.getForwardLayout();\n    if (data) {\n      this.layoutData = JSON.parse(data);\n    }\n  }\n  //关闭事件\n  close = () => {\n    const emit: any = new Event('close');\n    emit.detail = this.layoutData;\n    this.dispatchEvent(emit);\n  }\n  //浮动事件\n  gridItemFloat = (event: PointerEvent) => {\n    const gridItem: GridItemData = this.getGridItem(event?.currentTarget);\n    if (gridItem) gridItem.float = !gridItem.float;\n    this.RenderIndex ++;\n  }\n  //GridLayout的点击事件\n  onGridLayoutClick (event: any) {\n    if(event?.target?.closest(\".toolbar\")) return;\n    if(event?.target?.closest(\".grid-item\")) return;\n    this.layoutData.forEach((item) => {delete item.selected});\n    this.RenderIndex ++;\n  }\n  //获取最小的Y座标\n  getMinXY(grid:ItemData){\n    let { x, h, w, y } = grid;\n    if(y <= this.gridMargin) {\n      y = this.gridMargin;\n      return {x,y}\n    }\n\n    const list = this.findOverlapItem(x, y, w, h,[this.curActiveGridItem.id]);\n    const exceptIds = list.map(item => item.id);\n    y = this.gridMargin;\n    let item:any = this.findBigestOverlapItem(x, y, w, h,[...exceptIds,this.curActiveGridItem.id]);\n    // this.calcOverArea(grid,item) >= 6\n    while (item){\n      y = y + this.gridMargin;\n      item = this.findBigestOverlapItem(x, y, w, h, [...exceptIds,this.curActiveGridItem.id]);\n    }\n    return { x, y };\n  }\n  //计算交叉点\n  calcOverArea(data1:ItemData,data2:ItemData) {\n    const overX1 = Math.max(data1.x, data2.x);\n    const overX2 = Math.min(data1.x + data1.w, data2.x + data2.w);\n    const overW = overX2 - overX1;\n    const overY1 = Math.max(data1.y, data2.y);\n    const overY2 = Math.min(data1.y + data1.h, data2.y + data1.h);\n    const overH = overY2 - overY1;\n    const overArea = overH * overW;\n    return overArea;\n  }\n  //整理Item底部重叠的地方\n  clearBottomOver(){\n    const list = this.layoutData.filter(item => !item.float)\n    for(let item of list ){\n      let {x,y,w,h,id} = item\n      if(this.curActiveGridItem?.id === id){//不允许移动当前Item\n        x = this.dragData.x;\n        y = this.dragData.y;\n        w = this.dragData.w;\n        h = this.dragData.h;\n      }\n      let list = this.findOverlapItem(x, y, w, h, [id]);\n      list = list.filter((item:any) => item.id !== this.curActiveGridItem?.id)//不允许移动当前Item\n      if(list.length){\n        for(let i = 0;i < list.length;i++){\n          list[i].y = y + h + this.gridMargin;\n        }\n        this.clearBottomOver();\n        return;\n      }\n    }\n  }\n  //移除Item上面的空间\n  clearTopSpace(){\n    const list = this.layoutData.filter(item => !item.float);\n    for(let item of list ){\n      let {x,y,w,h,id} = item;\n      if(this.curActiveGridItem?.id === id){//不允许移动当前Item\n        continue;\n      }\n      let newY = y - this.gridMargin;\n      let hasSpace = false;\n      const exceptIds = [id];\n      if(this.curActiveGridItem?.id)\n        exceptIds.push(this.curActiveGridItem.id);\n      while(newY >= this.gridMargin &&  !this.findBigestOverlapItem(x,newY,w,h,exceptIds)){\n        item.y = newY;\n        newY = item.y - this.gridMargin;\n        hasSpace = true\n      }\n      if(hasSpace){\n        this.clearTopSpace();\n        return;\n      }\n    }\n    \n  }\n  //重新排序\n  rearrangement(){\n    this.clearTopSpace();\n    this.clearBottomOver();\n  }\n  setZindexUp(){\n    if(this.curSelectGridItem?.float){\n      this.curSelectGridItem.z ++;\n      this.RenderIndex++;\n    }\n  }\n  setZindexDown(){\n    if(this.curSelectGridItem?.float){\n      this.curSelectGridItem.z --;\n      this.RenderIndex++;\n    }\n  }\n  //当前活动的GridItem\n  get curActiveGridItem(){\n    return this.curMovingGridItemData || this.curResizingGridItemData || null;\n  }\n  //当前活动的GridItem style\n  get curActiveGridItemStyle(){\n    return this.curActiveGridItem?.style;\n  }\n  get curSelectGridItem():GridItemData|undefined{\n    return this.layoutData.find(item => item.selected)\n  }\n  // connectedCallback(){\n  //   // \n\n  // }\n  // disconnectedCallback(){\n  // }\n  render() {\n    this.stageWidth = this.getBoundingClientRect().width;\n    return html`<div class=\"grid-layout\" @click=\"${this.onGridLayoutClick}\">\n    <div class=\"grid-sitting\" style=\"'height:${this.stageHeight}px'\"></div>\n    ${this.edit ? html`\n      <div class=\"toolbar\">\n        <div style=\"margin-right:20px;display:${this.curSelectGridItem?.float?'flex':'none'}\">\n          <i class=\"el-icon add\" @click=\"${this.setZindexUp}\" >\n            <!--[-->\n              <svg viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\" data-v-ea893728=\"\"><path fill=\"currentColor\" d=\"M572.235 205.282v600.365a30.118 30.118 0 1 1-60.235 0V205.282L292.382 438.633a28.913 28.913 0 0 1-42.646 0 33.43 33.43 0 0 1 0-45.236l271.058-288.045a28.913 28.913 0 0 1 42.647 0L834.5 393.397a33.43 33.43 0 0 1 0 45.176 28.913 28.913 0 0 1-42.647 0l-219.618-233.23z\"></path></svg>\n            <!--]-->\n          </i>\n          <i class=\"el-icon back\" @click=\"${this.setZindexDown}\">\n            <!--[-->\n              <svg viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\" data-v-ea893728=\"\"><path fill=\"currentColor\" d=\"M544 805.888V168a32 32 0 1 0-64 0v637.888L246.656 557.952a30.72 30.72 0 0 0-45.312 0 35.52 35.52 0 0 0 0 48.064l288 306.048a30.72 30.72 0 0 0 45.312 0l288-306.048a35.52 35.52 0 0 0 0-48 30.72 30.72 0 0 0-45.312 0L544 805.824z\"></path></svg>\n            <!--]-->\n          </i>\n        </div>\n        <i class=\"el-icon add\" @click=\"${this.addGridItem}\" >\n          <!--[-->\n          <svg viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\" data-v-ea893728=\"\"><path fill=\"currentColor\" d=\"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z\"></path></svg>\n          <!--]-->\n        </i>\n        <i class=\"el-icon back\" @click=\"${this.backLayout}\">\n          <!--[-->\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-reply\" viewBox=\"0 0 16 16\">\n            <path d=\"M6.598 5.013a.144.144 0 0 1 .202.134V6.3a.5.5 0 0 0 .5.5c.667 0 2.013.005 3.3.822.984.624 1.99 1.76 2.595 3.876-1.02-.983-2.185-1.516-3.205-1.799a8.74 8.74 0 0 0-1.921-.306 7.404 7.404 0 0 0-.798.008h-.013l-.005.001h-.001L7.3 9.9l-.05-.498a.5.5 0 0 0-.45.498v1.153c0 .108-.11.176-.202.134L2.614 8.254a.503.503 0 0 0-.042-.028.147.147 0 0 1 0-.252.499.499 0 0 0 .042-.028l3.984-2.933zM7.8 10.386c.068 0 .143.003.223.006.434.02 1.034.086 1.7.271 1.326.368 2.896 1.202 3.94 3.08a.5.5 0 0 0 .933-.305c-.464-3.71-1.886-5.662-3.46-6.66-1.245-.79-2.527-.942-3.336-.971v-.66a1.144 1.144 0 0 0-1.767-.96l-3.994 2.94a1.147 1.147 0 0 0 0 1.946l3.994 2.94a1.144 1.144 0 0 0 1.767-.96v-.667z\"/>\n          </svg>\n          <!--]-->\n        </i>\n        <i class=\"el-icon forward\" @click=\"${this.forwardLayout}\">\n          <!--[-->\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-reply\" viewBox=\"0 0 16 16\">\n            <path d=\"M6.598 5.013a.144.144 0 0 1 .202.134V6.3a.5.5 0 0 0 .5.5c.667 0 2.013.005 3.3.822.984.624 1.99 1.76 2.595 3.876-1.02-.983-2.185-1.516-3.205-1.799a8.74 8.74 0 0 0-1.921-.306 7.404 7.404 0 0 0-.798.008h-.013l-.005.001h-.001L7.3 9.9l-.05-.498a.5.5 0 0 0-.45.498v1.153c0 .108-.11.176-.202.134L2.614 8.254a.503.503 0 0 0-.042-.028.147.147 0 0 1 0-.252.499.499 0 0 0 .042-.028l3.984-2.933zM7.8 10.386c.068 0 .143.003.223.006.434.02 1.034.086 1.7.271 1.326.368 2.896 1.202 3.94 3.08a.5.5 0 0 0 .933-.305c-.464-3.71-1.886-5.662-3.46-6.66-1.245-.79-2.527-.942-3.336-.971v-.66a1.144 1.144 0 0 0-1.767-.96l-3.994 2.94a1.147 1.147 0 0 0 0 1.946l3.994 2.94a1.144 1.144 0 0 0 1.767-.96v-.667z\"/>\n          </svg>\n          <!--]-->\n        </i>\n        <i class=\"el-icon save\" @click=\"${this.saveCurLayout}\">\n          <!--[-->\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-download\" viewBox=\"0 0 16 16\">\n            <path d=\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"/>\n            <path d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"/>\n          </svg>\n          <!--]-->\n        </i>\n        <i class=\"el-icon close\" @click=\"close()\">\n          <!--[-->\n          <svg viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\" data-v-ea893728=\"\"><path fill=\"currentColor\" d=\"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z\"></path></svg>\n          <!--]-->\n        </i>\n      </div>`:''\n    }\n    \n    ${this.layoutData.map((item, i) => {\n      return html`\n      <div class=\"grid-item\"  data-index=\"${i}\" .griddingWidth=\"${this.griddingWidth}\"\n        selected=\"${item.selected}\"\n        float=\"${item.float}\"\n        @mousedown=\"${this.gridItemDragstart}\"\n        style=\"${this.getGridItemStyle(item)}\"\n        transition=\"${this.transition}\"\n        >\n        <slot name=\"${item.slot || ''}\"></slot>\n        <div class=\"tool-box\">\n          <i class=\"el-icon set-float\" @click=\"{this.gridItemFloat}\">\n            <!--[-->\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-subtract\" viewBox=\"0 0 16 16\">\n              <path d=\"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2z\"/>\n            </svg>\n            <!--]-->\n          </i>\n          <i @click=\"{this.gridItemClose}\" class=\"el-icon close grid-item-close\" style=\"font-size:20px;\" >\n            <!--[-->\n            <svg viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"currentColor\" d=\"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z\"></path></svg>\n            <!--]-->\n          </i>\n        </div>\n        <div class=\"resize bottom-right\" @mousedown=\"${this.gridItemResizeStart}\" ></div>\n      </div>\n      \n      `\n    })}\n    ${this.draggIng ? this.drawDragDataHtml():''}\n\n  </div>\n    `;\n  }\n  static styles = css`\n  :host {\n    display: block;\n    padding: 0px;\n    height:100%;\n  }\n  .grid-layout {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow-x: hidden;\n  }\n  .toolbar{\n    position: absolute;\n    right:5px;\n    top:5px;\n    padding:2px;\n    z-index: 9999;\n    display:flex;\n  }\n  .toolbar .el-icon svg{\n    width:18px;\n    height: 18px;\n  }\n  .toolbar .el-icon {\n    cursor: pointer;\n    margin:0px 3px;\n    border:1px solid #dbdbdb;\n    border-radius: 3px;\n    padding: 3px;\n    display: inline-flex;\n    width: 18px;height: 18px;\n    background-color: #fff;\n  }\n  .toolbar .el-icon:hover {\n    background-color: #4097e4;\n    color:#fff;\n  }\n  .toolbar .el-icon.forward svg{\n    transform: scaleX(-1);\n  }\n  .old-data {\n    opacity: 0.3;\n  }\n  .grid-sitting{\n    width:100%;\n    top:0px;\n    position: absolute;\n    z-index:-1\n  }  \n  .grid-item {\n    display:block;\n    position:absolute;\n    min-width: 80px;\n    min-height: 50px;\n    border-radius: 3px;\n    overflow:hidden;\n    background-color:#fff;\n    border:1px solid #c3c3c3;\n    box-sizing: border-box;\n  }\n  .grid-item[transition=\"true\"] {\n    transition: all 0.3s;\n  }\n  .grid-item.move {\n    cursor:move;\n  }\n  .grid-item[selected=\"true\"] {\n    box-shadow: 0px 0px 6px -2px rgb(48 47 51);\n    transition: none;\n  }\n  .grid-item[float=\"true\"]{\n    border:1px solid #3250a7;\n  }\n  .grid-item[float=\"true\"] .tool-box .set-float{\n    opacity: 1;\n    color:#3250a7;\n  }\n  .grid-item:hover .resize{\n    display: flex;\n  }\n  .grid-item .bottom-right{\n   cursor: se-resize;\n   right: 4px;\n   bottom: 4px;\n   width: 10px;\n   height: 10px;\n   border-right: 3px solid #c3bebe;\n   border-bottom: 3px solid #c3bebe;\n  }\n  .grid-item .tool-box {\n   position: absolute;\n   top:5px;\n   right:10px;\n   display: flex;\n  }\n .grid-item  .tool-box .el-icon {\n   width:15px;\n   height:15px;\n   color:#929292;\n   padding:3px;\n   border-radius: 3px;\n   display: flex;\n }\n .grid-item .tool-box .el-icon:hover{\n   cursor:pointer;\n   opacity: 0.6;\n  }\n  .grid-item .resize > svg {\n    color: rgb(160 160 160)\n  }\n  .grid-item .resize:hover{\n    opacity: 0.6;\n  }\n\n  .grid-item[drag=true] {\n   opacity: 0.5;\n   background-color: rgb(249, 227, 193);\n   box-shadow: none;\n   border: none;\n   transition: none;\n }\n .grid-item[drag=true] .close,\n .grid-item[drag=true] .set-float{\n   display: none;\n }\n .resize{\n   position: absolute;\n }\n`;\n}\n"]}